{% extends "base.html" %}

{% block content %}

<style>
  .marketing-page {
    max-width: 1080px;
    margin: 0 auto;
    padding: 1.5rem 1rem 2.5rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .hero {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.25rem;
    align-items: center;
    padding: 1.25rem;
  }

  .hero-actions {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    margin-top: 0.5rem;
  }

  .hero-note {
    margin: 0.25rem 0 0;
    color: #6b7280;
    font-size: 0.9rem;
  }

  .hero-chat-preview {
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 1rem;
    background: #f9fafb;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  body.dark .hero-chat-preview {
    border-color: #1f2937;
    background: #0b1224;
  }

  .bubble {
    border-radius: 10px;
    padding: 0.6rem 0.8rem;
    max-width: 100%;
    font-size: 0.95rem;
  }

  .bubble-user {
    background: #dbeafe;
    align-self: flex-end;
  }

  .bubble-bot {
    background: #e5e7eb;
    align-self: flex-start;
  }

  body.dark .bubble-user {
    background: #1d4ed8;
    color: #e5e7eb;
  }

  body.dark .bubble-bot {
    background: #111827;
    color: #e5e7eb;
  }

  .why-list, .testimonials {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 0.75rem;
  }

  .why-card, .testimonial {
    border-radius: 10px;
    padding: 0.85rem 0.95rem;
    border: 1px solid rgba(148, 163, 184, 0.4);
    background: #f9fafb;
    font-size: 0.95rem;
  }

  body.dark .why-card, body.dark .testimonial {
    background: #0b1224;
    border-color: #1f2937;
  }
</style>

<div class="tc-card marketing-page space-y-6">
  {% if demo_api_key %}
  <section class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-sm p-5">
    <h2 class="tc-h2" style="margin:0 0 0.35rem;">This is how TheoChat will look on your site</h2>
    <p class="tc-subtext" style="margin:0 0 0.6rem;">Try it now â ask Theo about TheoChat.</p>
    <div style="border:1px dashed var(--border);border-radius:12px;padding:0.75rem;background:var(--card);">
      <script src="{{ embed_base }}/embed.js?api_key={{ demo_api_key }}" async></script>
    </div>
  </section>
  {% endif %}

  <section class="hero">
    <div class="hero-layout">
      <div class="hero-content-block">
        <div class="tc-pill-label mb-4">
          <span class="tc-pill-dot"></span>
          <span>7-day free trial Â· Cancel anytime</span>
        </div>
        <h1 class="tc-h1">Meet Theo â your website's AI assistant.</h1>
        <p class="tc-subtext mb-4">Answer questions, capture leads, and assist customers 24/7 with a smart AI trained on your business.</p>
        <div class="hero-actions" style="display:flex;flex-wrap:wrap;align-items:center;gap:0.75rem;">
          <a href="{{ url_for('register') }}" class="tc-btn-primary">Start free 7-day trial</a>
          <div class="flex items-center text-sm tc-subtext" style="display:flex;align-items:center;gap:0.35rem;">
            <span>Already have an account?</span>
            <a href="{{ url_for('login') }}" class="tc-link-secondary">Log in</a>
          </div>
        </div>
        <p class="hero-note">No long-term contract. Cancel anytime.</p>
      </div>
      <div class="hero-visual">
        <div class="hero-chat-preview">
          <div class="bubble bubble-user">Can Theo help my customers around the clock?</div>
          <div class="bubble bubble-bot">Hi, I'm Theo. I handle FAQs, capture leads, and share your services 24/7.</div>
          <div class="bubble bubble-user">How long does setup take?</div>
          <div class="bubble bubble-bot">Paste one snippet on your site and you're live in under 30 seconds.</div>
        </div>
      </div>
    </div>
  </section>

  <section class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-sm p-6">
    <h2 class="text-xl font-semibold mb-2">How it works</h2>
    <ol class="steps text-sm text-slate-700 dark:text-slate-300">
      <li><strong>Add your business info</strong> â Upload documents, FAQs, and service details. Theo learns from your content.</li>
      <li><strong>Paste one small code snippet</strong> â Install the TheoChat widget on any website in under 30 seconds.</li>
      <li><strong>Theo assists your visitors</strong> â Visitors get fast, accurate answers based on your own content, 24/7.</li>
    </ol>
  </section>

  <section class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-sm p-6">
    <h2 class="text-xl font-semibold mb-2">Why TheoChat?</h2>
    <div class="why-list">
      <div class="why-card"><strong>Instant setup</strong> â No developers required. TheoChat is ready in minutes.</div>
      <div class="why-card"><strong>Knows your business</strong> â Theo uses your documents and website content to answer accurately.</div>
      <div class="why-card"><strong>Converts visitors</strong> â Capture contact details and questions directly from the widget.</div>
      <div class="why-card"><strong>Lightweight widget</strong> â Fast, mobile-friendly chat bubble that fits into your brand.</div>
      <div class="why-card"><strong>Changes to website?</strong> â Update your site, click one button, TheoChat re-learns it.</div>
      <div class="why-card"><strong>Simple pricing</strong> â 7-day free trial, then Â£19/month.</div>
    </div>
  </section>

  <section class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-sm p-6">
    <h2 class="text-xl font-semibold mb-2 text-center">Testimonials</h2>
    <div class="testimonials">
      <div class="testimonial">âTheoChat reduced our support emails by 40% in the first week.â<br><em>â Local business owner</em></div>
      <div class="testimonial">âFinally, a chatbot that actually understands our services.â<br><em>â Agency founder</em></div>
    </div>
  </section>

  <section class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-sm p-6 text-center">
    <h2 class="text-xl font-semibold mb-2">Ready to put TheoChat to work for you?</h2>
    <p class="text-slate-600 dark:text-slate-400 mb-2">Get started in minutes. No code, no complex setup.</p>
    <a href="{{ url_for('register') }}" class="inline-flex items-center justify-center rounded-full px-4 py-2 text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 border border-blue-600">Create your account</a>
    <p class="hero-note" style="margin-top:0.5rem;">Meet Theo â your websiteâs new AI assistant.</p>
  </section>
</div>
{% if demo_api_key %}
<div id="demo-widget-helper" class="demo-widget-helper" role="note" aria-label="TheoChat demo helper">
  <button type="button" class="demo-widget-helper__close" aria-label="Dismiss demo helper">x</button>
  <strong>This is how TheoChat will look on your site</strong>
  <p>Try it now - ask Theo about TheoChat.</p>
</div>
<script>
  (function() {
    const helper = document.getElementById('demo-widget-helper');
    if (!helper) return;
    const KEY = 'theochat_demo_helper_dismissed';
    let dismissed = false;
    try { dismissed = localStorage.getItem(KEY) === '1'; } catch (e) { dismissed = false; }
    if (dismissed) { helper.remove(); return; }

    const closeBtn = helper.querySelector('.demo-widget-helper__close');
    function hideHelper() {
      helper.remove();
      try { localStorage.setItem(KEY, '1'); } catch (e) {}
      cleanup();
    }
    if (closeBtn) closeBtn.addEventListener('click', hideHelper);

    setTimeout(() => helper.classList.add('is-visible'), 2000);

    let observer = null;
    try {
      observer = new MutationObserver((mutations) => {
        for (const m of mutations) {
          for (const node of m.addedNodes) {
            if (!(node instanceof HTMLElement)) continue;
            const id = (node.id || '').toLowerCase();
            const cls = (node.className || '').toString().toLowerCase();
            if (id.includes('theochat') || cls.includes('theochat')) {
              hideHelper();
              return;
            }
          }
        }
      });
      observer.observe(document.body, { childList: true, subtree: true });
    } catch (e) {}

    function clickListener(e) {
      const t = e.target;
      if (!(t instanceof HTMLElement)) return;
      const id = (t.id || '').toLowerCase();
      const cls = (t.className || '').toString().toLowerCase();
      if (id.includes('theochat') || cls.includes('theochat')) { hideHelper(); }
    }
    document.addEventListener('click', clickListener, true);

    function cleanup() {
      if (observer) observer.disconnect();
      document.removeEventListener('click', clickListener, true);
    }
  })();
</script>
{% endif %}

{% endblock %}
